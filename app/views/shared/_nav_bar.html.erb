<nav class="navbar navbar-dark bg-dark navbar-expand-lg">
    <span class="navbar-brand mb-0 h1 "><i class="fas fa-utensils"></i>MacroMeals</span>
        <ul class="navbar-nav">
        <li class="nav-item active">
            <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/users/new">Sign Up</a>
        </li>
        <% if session[:user_id] %>
          <li class="nav-item">
              <a class="nav-link" id="logout" href="/logout">Logout</a>
          </li>
        <% else %>
          <li class="nav-item">
              <a class="nav-link" href="/login">Log In</a>
          </li>
        <% end %>
        <li class="nav-item">
            <a class="nav-link" href="/about">About</a>
        </li>
        <% if session[:user_id] %>
          <li class="nav-item">
              <a class="nav-link" id="all_recipes" href="/recipes">All Recipes</a>
          </li>
        <% end %>
    </ul>
  </nav>
<script type="text/javascript" charset="utf-8">
  $(document).ready(
  () => {
    $('#all_recipes').click((event) => {
      $('#recipes').empty();
      $('#recipe').empty();
       event.preventDefault();
       $('#hide').hide();
       $.get('/recipes.json', (data) => {
          const recipes = JSONFormatter.parseJSONIndex(data);
          $('#recipes').append('<ul>')
          for(let i = 0; i < recipes.length; i++){
            const recipe = recipes[i];
            $('#recipes').append(recipe.data)
          }
          $('#recipes').append('</ul>')
       });
    });
    $(document).on("click", "#recipes a", (e) => {
      e.preventDefault();
      $.get(e.target.href, (data) => {
        const recipe = JSONFormatter.parseJSONShow(data);
        $('#recipe').append(recipe);
      });
       $('#recipes').empty();
    });
});

</script>
